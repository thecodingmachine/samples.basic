<?php
/*
 * This file has been automatically generated by TDBM.
 * DO NOT edit this file, as it might be overwritten.
 * If you need to perform changes, edit the ProjectDao class instead!
 */
namespace Test\Dao;

use Mouf\Database\DAOInterface;
use Mouf\Database\TDBM\TDBMService; 
use Mouf\Database\TDBM\Filters\OrderByColumn;

/**
 * The ProjectDaoBase class will maintain the persistance of Test\Dao\Bean\ProjectBean class into the project table.
 * 
 */
class ProjectDaoBase implements DAOInterface
{

	/**
	 * @var TDBMService
	 */
	protected $tdbmService;
	
	/**
	 * The default Sort column
	 * @var string
	 */
	private $defaultSort = null;
	
	/**
	 * The default Sort direction
	 * @var string
	 */
	private $defaultDirection = 'asc';
	
	/**
	 * Sets the TDBM service used by this DAO.
	 *
	 * @Property
	 * @Compulsory
	 * @param TDBMService $tdbmService
	 */
	public function setTdbmService(TDBMService $tdbmService) {
		$this->tdbmService = $tdbmService;
	}

	/**
	 * Return a new instance of Test\Dao\Bean\ProjectBean object, that will be persisted in database.
	 *
	 * @return Test\Dao\Bean\ProjectBean
	 */
	public function create() {
		return $this->tdbmService->getNewObject('project', true, 'Test\Dao\Bean\ProjectBean');
	}
	
	/**
	 * Persist the Test\Dao\Bean\ProjectBean instance
	 *
	 */
	public function save($obj) {
		$obj->save();
	}

	/**
	 * Get all Project records. 
	 *
	 * @return array<Test\Dao\Bean\ProjectBean>
	 */
	public function getList() {
		if ($this->defaultSort){
			$orderBy = new OrderByColumn('project', $this->defaultSort, $this->defaultDirection);
		}else{
			$orderBy = null;
		}
		return $this->tdbmService->getObjects('project',  null, $orderBy, null, null, 'Test\Dao\Bean\ProjectBean');
	}
	
	/**
	 * Get Test\Dao\Bean\ProjectBean specified by its ID (its primary key)
	 * If the primary key does not exist, an exception is thrown.
	 *
	 * @param string $id
	 * @param boolean $lazyLoading If set to true, the object will not be loaded right away. Instead, it will be loaded when you first try to access a method of the object.
	 * @return Test\Dao\Bean\ProjectBean
	 * @throws TDBMException
	 */
	public function getById($id, $lazyLoading = false) {
		return $this->tdbmService->getObject('project', $id, 'Test\Dao\Bean\ProjectBean', $lazyLoading);
	}
	
	/**
	 * Deletes the Test\Dao\Bean\ProjectBean passed in parameter.
	 *
	 * @param Test\Dao\Bean\ProjectBean $obj
	 */
	public function delete($obj) {
		$this->tdbmService->deleteObject($obj);
	}
	
	/**
	 * Get a list of Test\Dao\Bean\ProjectBean specified by its filters.
	 *
	 * @param mixed $filterBag The filter bag (see TDBMService::getObjects for complete description)
	 * @param mixed $orderbyBag The order bag (see TDBMService::getObjects for complete description)
	 * @param integer $from The offset
	 * @param integer $limit The maximum number of rows returned
	 * @return array<Test\Dao\Bean\ProjectBean>
	 */
	protected function getListByFilter($filterBag=null, $orderbyBag=null, $from=null, $limit=null) {
		if ($this->defaultSort && $orderbyBag == null){
			$orderbyBag = new OrderByColumn('project', $this->defaultSort, $this->defaultDirection);
		}
		return $this->tdbmService->getObjects('project', $filterBag, $orderbyBag, $from, $limit, 'Test\Dao\Bean\ProjectBean');
	}

	/**
	 * Get a single Test\Dao\Bean\ProjectBean specified by its filters.
	 *
	 * @param mixed $filterBag The filter bag (see TDBMService::getObjects for complete description)
	 * @return Test\Dao\Bean\ProjectBean
	 */
	protected function getByFilter($filterBag=null) {
		return $this->tdbmService->getObject('project', $filterBag, 'Test\Dao\Bean\ProjectBean');
	}
	
	/**
	 * Sets the default column for default sorting
	 *
	 */
	public function setDefaultSort($defaultSort){
		$this->defaultSort = $defaultSort;
	}
	
}
?>